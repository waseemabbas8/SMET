/*!
 * SweetDropdown: Sweet and versatile dropdowns
 * v1.0.0, 2016-06-02
 * http://github.com/adeptoas/sweet-dropdown
 *
 * Copyright (c) 2016 Adepto.as AS Â· Oslo, Norway
 * Dual licensed under the MIT and GPL licenses.
 *
 * See LICENSE-MIT.txt and LICENSE-GPL.txt
 */
(function(n){var t;return n.fn.sweetDropdown=function(t,i){switch(t){case"attach":return n(this).attr("data-dropdown",i);case"detach":return n(this).removeAttr("data-dropdown");case"show":return n(this).click();case"hide":return n.sweetDropdown.hideAll(),n(this);case"enable":return n(this).removeClass("dropdown-disabled");case"disable":return n(this).addClass("dropdown-disabled")}},n.sweetDropdown=function(){},n.sweetDropdown.attachAll=function(){n("body").off("click.dropdown").on("click.dropdown","[data-dropdown]",t);n("[data-dropdown]").off("click.dropdown").on("click.dropdown",t);n("html, .sweet-modal-content").off("click.dropdown").on("click.dropdown",n.sweetDropdown.hideAll);n(window).off("resize.dropdown").on("resize.dropdown",n.sweetDropdown.hideAll);return!0},n.sweetDropdown.hideAll=function(t,i){var o,u,r,f,e;if(t==null&&(t=null),i==null&&(i=null),f=t?n(t.target).parents().addBack():null,!f||!f.hasClass("dropdown-menu")||f.is("A"))return u=".dropdown-menu",e="[data-dropdown]",r="",i&&(r=n(i).attr("id"),n('[data-dropdown="#'+r+'"]').hasClass("dropdown-open")||(u=".dropdown-menu:not(#"+r+")",e='[data-dropdown!="#'+r+'"]')),n("body").find(u).removeClass("dropdown-opened").end().find(e).removeClass("dropdown-open"),o=window.setTimeout(function(){return n("body").find(u).hide().end()},200),!0},n.sweetDropdown.ANCHOR_POSITIONS=["top-left","top-center","top-right","right-top","right-center","right-bottom","bottom-left","bottom-center","bottom-right","left-top","left-center","left-bottom"],n.sweetDropdown.defaults={anchorPosition:"center"},t=function(t){var s,r,i,w,b,k,d,h,c,ot,it,a,l,v,rt,ut,u,o,ft,g,nt,tt,et,f,e,y,p;if(t==null&&(t=null),i=n(this),r=n(i.data("dropdown")),s=r.find(".dropdown-anchor"),it=r.hasClass("dropdown-has-anchor"),ut=i.hasClass("dropdown-open"),rt=i.hasClass("dropdown-disabled"),y=r.outerWidth(),p=i.outerWidth(),a=r.outerHeight(),l=i.outerHeight(),e=i.position().top,o=i.position().left,i.hasClass("dropdown-use-offset")&&(e=i.offset().top,o=i.offset().left),ot=e+l,et=o+p,r.length<1)return console.error("[SweetDropdown] Could not find dropdown: "+n(this).data("dropdown"));if(s.length<1&&it&&(s=n('<div class="dropdown-anchor"><\/div>'),r.prepend(s)),t!==void 0&&(t.preventDefault(),t.stopPropagation()),ut||rt)return!1;for(n.sweetDropdown.hideAll(null,i.data("dropdown")),h=n.sweetDropdown.defaults.anchorPosition,tt=n.sweetDropdown.ANCHOR_POSITIONS,v=0,ft=tt.length;v<ft;v++)g=tt[v],r.hasClass("dropdown-anchor-"+g)&&(h=g);if(f=0,u=0,nt=h.split("-"),c=nt[0],h=nt[1],c==="top"||c==="bottom")switch(h){case"left":u=o;break;case"center":u=o-y/2+p/2;break;case"right":u=et-y}if(c==="left"||c==="right")switch(h){case"top":f=e;break;case"center":f=e-a/2+l/2;break;case"bottom":f=e+l-a}switch(c){case"top":f=e+l;break;case"right":u=o-y;break;case"bottom":f=e-a;break;case"left":u=o+p}return k=parseInt(r.data("add-x")),d=parseInt(r.data("add-y")),isNaN(k)||(u+=k),isNaN(d)||(f+=d),w=parseInt(i.data("add-anchor-x")),b=parseInt(i.data("add-anchor-y")),isNaN(w)||s.css({marginLeft:w}),isNaN(b)||s.css({marginTop:b}),r.css({top:f,left:u,display:"block"}),window.setTimeout(function(){return r.addClass("dropdown-opened")},0),i.addClass("dropdown-open"),i},n(function(){return n.sweetDropdown.attachAll()})})(jQuery);